name: PUBLISH
on: [push]

jobs:
    deploy:
          runs-on: ubuntu-latest
          steps:
               - name: Fetch
                 uses: actions/checkout@v3
               - name: SSH_EC2
                 uses: appleboy/ssh-action@master
                 with:
                    host: 3.88.208.120
                    key: ${{secrets.BRANCH}}
                    username: ubuntu
                    port: 22
                    script: |
                         sudo curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash
                         sudo . ~/.nvm/nvm.sh
                         sudo nvm install --lts
                         sudo git clone https://github.com/acs-web-tech/PEARLTHOUGHTSREPO.git
                         cd PEARLTHOUGHTSREPO
                         sudo npm -g install pm2
                         sudo pm2 start index.js
                    
          
                          
